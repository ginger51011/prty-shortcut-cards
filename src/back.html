<!-- See ginger51011/prty-shortcut-cards for full source -->

<div class="note">
    <div class="title-container">
        <span class="title-text">
            {{Software}}
            {{^Software}}
                Unspecified Software
            {{/Software}}
        </span>
    </div>
    <div class="front-container">
        {{Action}}
    </div>
    <!-- Front of card ends -->

    <hr class="card-divider"/>
    
    <!-- Back of card begins -->
    <span id="shortcut-sequence" hidden>{{Shortcut}}</span>
    <div id="formatted-sequence" class="shortcut-container">
        {{^Shortcut}}
            <i>Fill field shortcut in form `Ctrl Shift P` to format!</i>
        {{/Shortcut}}
    </div>

    <script>
        /**
        */
        const shortcutText = document.getElementById('shortcut-sequence').innerText;

        // Splits shortcut on one or more `\n`, to support commands
        // as `Ctrl+K O`, and applies styling on components
        let subcommands = shortcutText.split(/\n+/);

        // Trim away leading and trailing whitespaces
        subcommands = subcommands.map((sub) => sub.trim());

        const container = document.getElementById('formatted-sequence');

        subcommands.forEach((sub, idx) => {
            if (idx !== 0) {
                // We have a new subcommand, prepend a space
                container.append(' ');
            }

            const shortcutArray = sub.split(' ');
            shortcutArray.forEach((s, i) => {
                if (i !== 0) {
                    // Prepend a plus, this is not the first in a sequence
                    container.append('+');
                }

                const newElement = document.createElement('kbd');
                newElement.innerText = s;
                container.append(newElement);
            });
        });
    </script>
</div>