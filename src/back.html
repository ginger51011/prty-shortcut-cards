<!-- See ginger51011/prty-shortcut-cards for full source -->

<div class="note">
    <div class="title-container">
        <span class="title-text">
            {{Software}}
            {{^Software}}
                Unspecified Software
            {{/Software}}
        </span>
    </div>
    <div class="front-container">
        {{Action}}
    </div>
    <!-- Front of card ends -->

    <hr class="card-divider"/>
    
    <!-- Back of card begins -->
    <span id="shortcut-sequence-1" hidden>{{Shortcut Sequence}}</span>
    <span id="shortcut-sequence-2" hidden>{{Extra Shortcut Sequence}}</span>
    <!-- Is unhidden when element is ready -->
    <div id="formatted-sequence" class="shortcut-container" hidden>
        {{^Shortcut Sequence}}
            <i>Fill field shortcut in form `Ctrl Shift P` to format!</i>
        {{/Shortcut Sequence}}
    </div>

    <script>
        const shortcutText = document.getElementById('shortcut-sequence-1').innerText;
        const extraSequenceText = document.getElementById('shortcut-sequence-2').innerText;

        const sequenceContainer = document.getElementById('formatted-sequence');
        
        const shortcutArray = shortcutText.split(' ');
        appendKbd(shortcutArray, sequenceContainer);
        
        if (extraSequenceText && extraSequenceText.length !== '') {
            const extraArray = extraSequenceText.split(' ');
            appendKbd(extraArray, sequenceContainer);
        }
        
        // Was hidden until now, so building of element cannot be seen
        sequenceContainer.removeAttribute('hidden');

        /**
         * Appends a sequence of keys, properly formatted as `<kbd>` elements
         */
        function appendKbd(sequenceArray, container) {
            sequenceArray.forEach((key, index) => {
                if (index !== 0) {
                    // Prepend a plus, this is not the first in a sequence
                    container.append('+');
                }

                const newElement = document.createElement('kbd');
                newElement.innerText = key;
                container.append(newElement);
            });
        }

    </script>
</div>
